<%= form_with model: [:admin, performer], local: true, class: "space-y-6" do |form| %>
  
  <!-- Error Messages -->
  <% if performer.errors.any? %>
    <div class="alert alert-error">
      <i class="fas fa-exclamation-circle"></i>
      <div>
        <h3 class="font-bold">Please fix the following errors:</h3>
        <ul class="list-disc list-inside mt-2">
          <% performer.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    </div>
  <% end %>

  <!-- Name Field -->
  <div class="form-control">
    <%= form.label :name, class: "label" do %>
      <span class="label-text font-medium">Name <span class="text-error">*</span></span>
    <% end %>
    <%= form.text_field :name, 
        class: "input input-bordered w-full #{'input-error' if performer.errors[:name].any?}",
        placeholder: "Enter performer's name" %>
    <% if performer.errors[:name].any? %>
      <div class="label">
        <span class="label-text-alt text-error">
          <i class="fas fa-exclamation-triangle mr-1"></i>
          <%= performer.errors[:name].first %>
        </span>
      </div>
    <% end %>
  </div>

  <!-- Email Field -->
  <div class="form-control">
    <%= form.label :email, class: "label" do %>
      <span class="label-text font-medium">Email <span class="text-error">*</span></span>
    <% end %>
    <%= form.email_field :email, 
        class: "input input-bordered w-full #{'input-error' if performer.errors[:email].any?}",
        placeholder: "Enter performer's email address" %>
    <% if performer.errors[:email].any? %>
      <div class="label">
        <span class="label-text-alt text-error">
          <i class="fas fa-exclamation-triangle mr-1"></i>
          <%= performer.errors[:email].first %>
        </span>
      </div>
    <% end %>
    <div class="label">
      <span class="label-text-alt text-base-content/70">
        <i class="fas fa-info-circle mr-1"></i>
        Used for login and notifications
      </span>
    </div>
  </div>

  <!-- Password Field (only for new performers) -->
  <% if performer.new_record? %>
  <div class="form-control">
    <%= form.label :password, class: "label" do %>
      <span class="label-text font-medium">Password <span class="text-error">*</span></span>
    <% end %>
    <%= form.password_field :password, 
        class: "input input-bordered w-full #{'input-error' if performer.errors[:password].any?}",
        placeholder: "Enter password" %>
    <% if performer.errors[:password].any? %>
      <div class="label">
        <span class="label-text-alt text-error">
          <i class="fas fa-exclamation-triangle mr-1"></i>
          <%= performer.errors[:password].first %>
        </span>
      </div>
    <% end %>
    <div class="label">
      <span class="label-text-alt text-base-content/70">
        <i class="fas fa-info-circle mr-1"></i>
        Minimum 6 characters
      </span>
    </div>
  </div>

  <!-- Password Confirmation Field (only for new performers) -->
  <div class="form-control">
    <%= form.label :password_confirmation, class: "label" do %>
      <span class="label-text font-medium">Confirm Password <span class="text-error">*</span></span>
    <% end %>
    <%= form.password_field :password_confirmation, 
        class: "input input-bordered w-full #{'input-error' if performer.errors[:password_confirmation].any?}",
        placeholder: "Confirm password" %>
    <% if performer.errors[:password_confirmation].any? %>
      <div class="label">
        <span class="label-text-alt text-error">
          <i class="fas fa-exclamation-triangle mr-1"></i>
          <%= performer.errors[:password_confirmation].first %>
        </span>
      </div>
    <% end %>
  </div>
  <% end %>

  <!-- Genre Field -->
  <div class="form-control">
    <%= form.label :genre, class: "label" do %>
      <span class="label-text font-medium">Genre</span>
    <% end %>
    <%= form.text_field :genre, 
        class: "input input-bordered w-full #{'input-error' if performer.errors[:genre].any?}",
        placeholder: "e.g., Jazz, Rock, Classical, Hip-Hop" %>
    <% if performer.errors[:genre].any? %>
      <div class="label">
        <span class="label-text-alt text-error">
          <i class="fas fa-exclamation-triangle mr-1"></i>
          <%= performer.errors[:genre].first %>
        </span>
      </div>
    <% end %>
    <div class="label">
      <span class="label-text-alt text-base-content/70">
        <i class="fas fa-info-circle mr-1"></i>
        Specify the musical genre or style
      </span>
    </div>
  </div>

  <!-- Contact Field -->
  <div class="form-control">
    <%= form.label :contact, class: "label" do %>
      <span class="label-text font-medium">Contact Information</span>
    <% end %>
    <%= form.text_field :contact, 
        class: "input input-bordered w-full #{'input-error' if performer.errors[:contact].any?}",
        placeholder: "Phone, email, or other contact details" %>
    <% if performer.errors[:contact].any? %>
      <div class="label">
        <span class="label-text-alt text-error">
          <i class="fas fa-exclamation-triangle mr-1"></i>
          <%= performer.errors[:contact].first %>
        </span>
      </div>
    <% end %>
    <div class="label">
      <span class="label-text-alt text-base-content/70">
        <i class="fas fa-info-circle mr-1"></i>
        Phone number, email, or other way to reach the performer
      </span>
    </div>
  </div>

  <!-- Events Assignment -->
  <div class="form-control">
    <%= form.label :event_ids, class: "label" do %>
      <span class="label-text font-medium">Events</span>
    <% end %>
    <div class="border border-base-300 rounded-lg bg-base-50 max-h-60 overflow-y-auto">
      <% if Event.exists? %>
        <ul class="menu menu-compact">
          <% Event.order(title: 1).each do |event| %>
            <li>
              <label class="label cursor-pointer justify-start gap-3 px-4 py-3 hover:bg-base-200 rounded-lg">
                <%= check_box_tag "performer[event_ids][]", event.id, performer.event_ids.include?(event.id), 
                    class: "checkbox checkbox-primary" %>
                <div class="flex-1">
                  <div class="font-medium text-base-content"><%= event.title %></div>
                  <div class="text-sm text-base-content/70">
                    <%= event.date.strftime("%b %d, %Y") if event.date %> â€¢ <%= event.location %>
                  </div>
                </div>
              </label>
            </li>
          <% end %>
        </ul>
      <% else %>
        <div class="text-center py-8">
          <i class="fas fa-calendar-times text-base-content/40 text-2xl mb-2"></i>
          <p class="text-base-content/60">No events available</p>
          <%= link_to "Create Event", new_admin_event_path, class: "btn btn-primary btn-sm mt-2" %>
        </div>
      <% end %>
    </div>
    <%= hidden_field_tag "performer[event_ids][]", "" %>
    <div class="label">
      <span class="label-text-alt text-base-content/70">
        <i class="fas fa-info-circle mr-1"></i>
        Optional: Select multiple events for this performer
      </span>
    </div>
  </div>

  <!-- Bio Field -->
  <div class="form-control">
    <%= form.label :bio, class: "label" do %>
      <span class="label-text font-medium">Biography</span>
    <% end %>
    <%= form.text_area :bio, 
        rows: 6,
        class: "textarea textarea-bordered w-full #{'textarea-error' if performer.errors[:bio].any?}",
        placeholder: "Tell us about the performer's background, experience, and style..." %>
    <% if performer.errors[:bio].any? %>
      <div class="label">
        <span class="label-text-alt text-error">
          <i class="fas fa-exclamation-triangle mr-1"></i>
          <%= performer.errors[:bio].first %>
        </span>
      </div>
    <% end %>
    <div class="label">
      <span class="label-text-alt text-base-content/70">
        <i class="fas fa-info-circle mr-1"></i>
        Optional: Add background information, experience, and performance style
      </span>
    </div>
  </div>

  <!-- Form Actions -->
  <div class="card-actions justify-end pt-6 border-t border-base-200">
    <%= link_to "Cancel", 
        performer.persisted? ? admin_performer_path(performer) : admin_performers_path, 
        class: "btn btn-ghost" %>
    <%= form.submit performer.persisted? ? "Update Performer" : "Create Performer", 
        class: "btn btn-primary" %>
  </div>
<% end %>
