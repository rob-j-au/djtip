<div class="card bg-base-100 shadow-xl mb-8">
  <div class="card-body">
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
      <div>
        <h1 class="card-title text-4xl">Users</h1>
        <p class="text-base-content/70 mt-1">Manage event attendees and tip contributors</p>
      </div>
      <%= link_to "New User", new_user_path, class: "btn btn-primary" %>
    </div>
  </div>
</div>

<% if @users.any? %>
  <div class="card bg-base-100 shadow-xl">
    <div class="overflow-x-auto">
      <table class="table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @users.each do |user| %>
            <tr class="hover">
              <td>
                <div class="flex items-center gap-3">
                  <% if user.image_data? && user.image_url(:thumb) %>
                    <div class="avatar">
                      <div class="w-10 rounded-full ring ring-primary ring-offset-base-100 ring-offset-1">
                        <%= image_tag user.image_url(:thumb), alt: user.name, class: "rounded-full object-cover" %>
                      </div>
                    </div>
                  <% else %>
                    <div class="avatar placeholder">
                      <div class="bg-gradient-to-br from-primary to-secondary text-primary-content rounded-full w-10">
                        <span class="text-sm font-bold"><%= user.name&.first&.upcase || 'U' %></span>
                      </div>
                    </div>
                  <% end %>
                  <div>
                    <div class="font-bold"><%= user.name %></div>
                  </div>
                </div>
              </td>
              <td>
                <div class="text-sm opacity-70"><%= user.email %></div>
              </td>
              <td>
                <div class="text-sm opacity-70"><%= user.phone %></div>
              </td>
              <th>
                <div class="flex gap-2">
                  <%= link_to "View", user, class: "btn btn-ghost btn-xs" %>
                  <%= link_to "Edit", edit_user_path(user), class: "btn btn-ghost btn-xs" %>
                  <%= button_to "Delete", user, method: :delete,
                                class: "btn btn-ghost btn-xs text-error",
                                data: { 
                                  confirm: "Are you sure?",
                                  turbo_method: :delete 
                                } %>
                </div>
              </th>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% else %>
  <div class="card bg-base-100 shadow-xl">
    <div class="card-body items-center text-center py-16">
      <svg class="w-16 h-16 text-base-content/20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
      </svg>
      <h3 class="card-title mt-4">No users yet</h3>
      <p class="text-base-content/70 mb-6">Get started by creating a new user</p>
      <%= link_to "New User", new_user_path, class: "btn btn-primary" %>
    </div>
  </div>
<% end %>
